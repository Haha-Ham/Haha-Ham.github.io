<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<title>Spoken Dialog by Javascript</title>
</head>
<body background="/img/image.jpg">

<h1>スライムが現れた！</h1>

<div style="position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%);">
    <button id="startButton" style="font-size: 24px;">たたかう</button>
</div>

<style type="text/css">
	body {
		background-image: url("image.jpg"); 
		background-size: cover;
		background-attachment: fixed;
		background-position: center;
	}
	h1 {
		color: white;
	}
	#resultOutput {
		color: white;
	}
	#startButton {
		background-color: black;
		color: white;
		border: 2px solid white;
	}
</style>

<script>
<!--
const startButton = document.querySelector('#startButton'); // 開始ボタン

// Yahoo! JAPANの天気情報の結果を格納する変数
let weather_rainfall = 0;

// 詠唱を開始する関数
function startChant() {
    showWeather();
}

// 開始ボタンのクリックイベントハンドラ
startButton.addEventListener('click', startChant);

// showWeather関数と関連するコードをここに追加する
function showWeather() {
    var appid = 'dj00aiZpPUE4Q3lhcWxXUXE1byZzPWNvbnN1bWVyc2VjcmV0Jng9MDU-';
    var coordinates = '135.17072987,34.23033837'; //和歌山のIPAドレスを設定している。
    var url = "https://map.yahooapis.jp/weather/V1/place?appid=" + appid + "&coordinates=" + encodeURI(coordinates) + "&output=json&callback=showResult";
    callJSONP(url);
}

//JSONPを実行する関数
function callJSONP(url) {
    var target = document.createElement('script');
    target.charset = 'utf-8';
    target.src = url;
    document.body.appendChild(target);
}

//JSONPの結果として実行される関数
function showResult(result) {
    if (result.ResultInfo.Count > 0) {
        let observationData = result.Feature[0].Property.WeatherList.Weather.find(weather => weather.Type === 'observation');
        if (observationData) {
            weather_rainfall = parseFloat(observationData.Rainfall);
            if (weather_rainfall < 0.30) { //weather_rainfallの値によって画面が遷移する。調節可能
                window.location.href = 'index1.html'; //比較的、晴れているとき
            } else {
                window.location.href = 'index2.html'; //比較的「、晴れていないとき
            }
        }
    }
}
-->
</script>

<!-- Yahoo!JAPANのAPIを利用したときはクレジット表記が必要 -->
<p>
Web Services by Yahoo! JAPAN （https://developer.yahoo.co.jp/sitemap/）
</p>
</body>
</html>
